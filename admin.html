<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-5">
    <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-center text-blue-600">Admin Panel - Manage Website Content</h2>
        
        <!-- Page Selection -->
        <label class="block text-gray-700 mt-4">Select Page:</label>
        <select id="pageName" class="w-full p-2 border rounded" onchange="loadSections()">
            <option value="index">Home</option>
            <option value="about">About</option>
            <option value="services">Services</option>
            <option value="careers">Careers</option>
            <option value="contact">Contact</option>
            <option value="form">Form</option>
            <option value="opening">Opening</option>
            <option value="partners">Partners</option>
        </select>

        <!-- Section Selection -->
        <label class="block text-gray-700 mt-4">Select Section:</label>
        <select id="sectionDropdown" class="w-full p-2 border rounded" onchange="loadSectionContent()">
            <option value="">Select Section</option>
        </select>

        <!-- Content Editor -->
        <label class="block text-gray-700 mt-4">Edit Section Content:</label>
        <textarea id="sectionContent" class="w-full p-3 border rounded h-40" placeholder="Enter content"></textarea>

        <!-- Buttons -->
        <div class="flex space-x-2 mt-4">
            <button onclick="addSection()" class="w-1/2 bg-blue-500 text-white py-2 rounded hover:bg-blue-600">Save Section</button>
            <button onclick="deleteSection()" class="w-1/2 bg-red-500 text-white py-2 rounded hover:bg-red-600">Delete Section</button>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>

    <script>
        // ðŸ”¥ Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCx3NDOJSKsTlpuvchewqQ10zRfUasFNW4",
    authDomain: "osps-eb15e.firebaseapp.com",
    projectId: "osps-eb15e",
    storageBucket: "osps-eb15e.firebasestorage.app",
    messagingSenderId: "220733045143",
    appId: "1:220733045143:web:3022ad1798e0236f852cd2"
  };
        // âœ… Firebase Initialize
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // âœ… Load Sections in Dropdown
        function loadSections() {
            let page = document.getElementById("pageName").value;
            let sectionDropdown = document.getElementById("sectionDropdown");
            sectionDropdown.innerHTML = '<option value="">Select Section</option>';

            db.collection(page).get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    let option = document.createElement("option");
                    option.value = doc.id;
                    option.textContent = doc.id;
                    sectionDropdown.appendChild(option);
                });
            });
        }

        // âœ… Load Selected Section Content
        function loadSectionContent() {
            let page = document.getElementById("pageName").value;
            let section = document.getElementById("sectionDropdown").value;
            let contentBox = document.getElementById("sectionContent");

            if (section) {
                db.collection(page).doc(section).get().then((doc) => {
                    if (doc.exists) {
                        contentBox.value = doc.data().content;
                    } else {
                        contentBox.value = "";
                    }
                });
            } else {
                contentBox.value = "";
            }
        }

        // âœ… Add or Update Section
        function addSection() {
            let page = document.getElementById("pageName").value;
            let section = document.getElementById("sectionDropdown").value || prompt("Enter New Section Name:");
            let content = document.getElementById("sectionContent").value;

            if (section) {
                db.collection(page).doc(section).set({
                    content: content
                }).then(() => {
                    alert("Section Added/Updated Successfully!");
                    loadSections();
                });
            }
        }

        // âœ… Delete Section
        function deleteSection() {
            let page = document.getElementById("pageName").value;
            let section = document.getElementById("sectionDropdown").value;

            if (section) {
                db.collection(page).doc(section).delete().then(() => {
                    alert("Section Deleted!");
                    loadSections();
                });
            } else {
                alert("Please select a section to delete!");
            }
        }
    </script>
</body>
</html>
